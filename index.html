<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Página principal con contenido oculto</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
    }
    #contenido-oculto {
      display: none;
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      background-color: #fff;
    }
    a {
      color: blue;
      text-decoration: underline;
      cursor: pointer;
    }
    /* Estilos del catálogo */
    .catalogo {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
      padding: 20px;
    }
    .producto {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    .producto:hover { transform: scale(1.03); }
    .producto img {
      width: 100%;
      border-radius: 8px;
    }
    .producto h3 {
      margin: 10px 0 5px;
      font-size: 1.2em;
    }
    .producto .precio {
      font-weight: bold;
      color: #28a745;
      margin: 10px 0;
    }
    .producto input,
    .producto select {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .producto button {
      width: 100%;
      padding: 10px;
      background: #28a745;
      color: #fff;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    .producto button:hover {
      background: #218838;
    }
  </style>
</head>
<body>

  <h2>Formulario para Apartar Turno</h2>

  <form id="formularioTurno">
    <label>Nombre:
      <input type="text" id="nombre" required>
    </label>
    <label>Teléfono:
      <input type="tel" id="telefono" required>
    </label>
    <label>Observación:
      <textarea id="observacion"></textarea>
    </label>
    <label>Foto:
      <input type="file" id="foto" accept="image/*">
    </label>
    <label>Turno Disponible:
      <select id="turno" required></select>
    </label>
    <button type="submit">Apartar Turno</button>
    <button type="button" onclick="limpiarCampos()">Limpiar</button>
  </form>

  <h3>Turnos Disponibles</h3>
  <ul id="turnosDisponibles"></ul>

  <button class="admin" type="button" onclick="limpiarHistorial()">🧹 Limpiar Historial (Admin)</button>

  <a href="#" id="enlace-ver-mas">Ver más</a>

  <div id="contenido-oculto">
    <h1>Catálogo de Productos</h1>
    <div class="catalogo" id="catalogo"></div>
  </div>

  <script>
    // TURNOS
    const horarios = ["09:00 AM", "10:00 AM", "11:00 AM", "12:00 PM", "01:00 PM", "02:00 PM", "03:00 PM", "04:00 PM", "05:00 PM", "06:00 PM", "07:00 PM", "08:00 PM", "09:00 PM", "10:00 PM"];
    const CONTRASENA_ADMIN = "admin123";
    let turnosTomados = JSON.parse(localStorage.getItem("turnos")) || [];

    function actualizarTurnos() {
      const select = document.getElementById("turno");
      const lista = document.getElementById("turnosDisponibles");
      const disponibles = horarios.filter(h => !turnosTomados.some(t => t.turno === h));

      select.innerHTML = "";
      lista.innerHTML = "";

      if (disponibles.length === 0) {
        lista.innerHTML = "<li>🚫 No hay turnos disponibles por ahora.</li>";
      } else {
        disponibles.forEach(turno => {
          let option = document.createElement("option");
          option.value = turno;
          option.textContent = turno;
          select.appendChild(option);

          let li = document.createElement("li");
          li.textContent = turno;
          lista.appendChild(li);
        });
      }
    }

    function limpiarCampos() {
      document.getElementById("formularioTurno").reset();
    }

    document.getElementById("formularioTurno").addEventListener("submit", function(e) {
      e.preventDefault();
      const nombre = document.getElementById("nombre").value;
      const telefono = document.getElementById("telefono").value;
      const observacion = document.getElementById("observacion").value;
      const turno = document.getElementById("turno").value;
      const foto = document.getElementById("foto").files[0]?.name || "";

      const nuevoTurno = { nombre, telefono, observacion, turno, foto };
      turnosTomados.push(nuevoTurno);
      localStorage.setItem("turnos", JSON.stringify(turnosTomados));

      const mensaje = `📢 Se ha apartado un turno:\n🕒 Turno: ${turno}\n👤 Nombre: ${nombre}\n📞 Tel: ${telefono}`;
      const url = `https://wa.me/573043537850?text=${encodeURIComponent(mensaje)}`;
      window.open(url, "_blank");

      alert("✅ Turno reservado correctamente.");
      limpiarCampos();
      actualizarTurnos();
    });

    function limpiarHistorial() {
      const clave = prompt("🔐 Ingrese la contraseña de administrador:");
      if (clave === CONTRASENA_ADMIN) {
        if (confirm("¿Está seguro de limpiar todos los turnos y reiniciar la lista?")) {
          localStorage.removeItem("turnos");
          turnosTomados = [];
          alert("✅ Historial limpiado.");
          actualizarTurnos();
        }
      } else {
        alert("❌ Contraseña incorrecta.");
      }
    }

    // VER MÁS
    document.getElementById("enlace-ver-mas").addEventListener("click", function(e) {
      e.preventDefault();
      const contenido = document.getElementById("contenido-oculto");
      if (contenido.style.display === "none" || contenido.style.display === "") {
        contenido.style.display = "block";
        this.textContent = "Ver menos";
      } else {
        contenido.style.display = "none";
        this.textContent = "Ver más";
      }
    });

    // CATÁLOGO
    const productos = [
      {
        nombre: "Pantalon pijama niño",
        descripcion: "Pantalon de niño color amarillo",
        precio: 15000,
        imagen: "snoopy1.jpg"
      },
      {
        nombre: "Crema Facial Rejuvenecedora",
        descripcion: "Crema con colágeno para revitalizar la piel.",
        precio: 22000,
        imagen: "cremarejuvenecedora.jpg"
      },
      {
        nombre: "Aceite de Argán",
        descripcion: "Aceite nutritivo para cabello y piel.",
        precio: 18000,
        imagen: "aceiteargan.jpg"
      }
    ];

    const catalogo = document.getElementById("catalogo");
    productos.forEach((p, i) => {
      const div = document.createElement("div");
      div.className = "producto";
      div.innerHTML = `
        <img src="${p.imagen}" alt="${p.nombre}">
        <h3>${p.nombre}</h3>
        <p>${p.descripcion}</p>
        <div class="precio">Precio: $${p.precio.toLocaleString()}</div>
        <input type="number" min="1" value="1" id="cantidad-${i}">
        <input type="text" placeholder="Tu nombre" id="nombre-${i}">
        <input type="tel" placeholder="WhatsApp" id="telefono-${i}">
        <input type="text" placeholder="Dirección de envío" id="direccion-${i}">
        <select id="pago-${i}">
          <option value="Nequi">Nequi</option>
          <option value="Daviplata">Daviplata</option>
          <option value="Tarjeta">Tarjeta</option>
        </select>
        <button onclick="comprar(${i})">Comprar por WhatsApp</button>
      `;
      catalogo.appendChild(div);
    });

    function comprar(i) {
      const cantidad = document.getElementById(`cantidad-${i}`).value;
      const nombre = document.getElementById(`nombre-${i}`).value.trim();
      const telefono = document.getElementById(`telefono-${i}`).value.trim();
      const direccion = document.getElementById(`direccion-${i}`).value.trim();
      const pago = document.getElementById(`pago-${i}`).value;

      if (!nombre || !telefono || !direccion || cantidad < 1) {
        alert("Completa todos los campos correctamente.");
        return;
      }

      const producto = productos[i];
      const total = producto.precio * cantidad;

      const mensaje = `Hola, quiero comprar ${cantidad} unidad(es) de ${producto.nombre}.
Nombre: ${nombre}
Teléfono: ${telefono}
Dirección: ${direccion}
Método de pago: ${pago}
Total: $${total.toLocaleString()} COP`;

      const whatsapp = `https://wa.me/573043537850?text=${encodeURIComponent(mensaje)}`;
      window.open(whatsapp, "_blank");
    }

    actualizarTurnos();
  </script>
</body>
</html>


